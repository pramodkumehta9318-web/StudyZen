<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>StudyZen | Focus Mode</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
  text-align:center;
}
.card{
  margin:15px;
  padding:20px;
  border-radius:20px;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(12px);
}
.badge{font-size:60px}
.timer{font-size:42px;margin:10px}
button{
  padding:12px 30px;
  border:none;
  border-radius:30px;
  font-weight:bold;
  background:gold;
  cursor:pointer;
}
button:disabled{opacity:.5}
ul{list-style:none;padding:0}
li{
  display:flex;
  justify-content:space-between;
  padding:10px;
  margin:6px;
  border-radius:12px;
  background:rgba(255,255,255,0.12);
}
.me{border:2px solid gold}
.rank-up{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,0.85);
  z-index:999;
}
.rank-box{
  padding:30px;
  border-radius:20px;
  background:linear-gradient(135deg,gold,orange);
  color:black;
  animation:zoom .6s ease;
}
@keyframes zoom{
  from{transform:scale(.3)}
  to{transform:scale(1)}
}
</style>
</head>

<body>

<h2>üéØ Focus Mode v1.2</h2>

<div class="card">
  <div class="badge" id="badge">ü•â</div>
  <h2 id="rank">Bronze</h2>
  XP: <span id="xp">0</span>
</div>

<div class="card">
  <div class="timer" id="timer">20:00</div>
  <button id="startBtn" onclick="startFocus()">‚ñ∂ Start Focus</button>
</div>

<div class="card">
  <h3>üèÜ Leaderboard</h3>
  <ul id="leaderboard"></ul>
</div>

<div class="rank-up" id="rankUp">
  <div class="rank-box">
    <h1>üî• RANK UP</h1>
    <h2 id="newRank"></h2>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const SESSION_TIME = 20 * 60;
const XP_PER_SESSION = 50;

/* ===== RANKS ===== */
const ranks = [
 {name:"Bronze",xp:0,badge:"ü•â"},
 {name:"Silver",xp:300,badge:"ü•à"},
 {name:"Gold",xp:700,badge:"ü•á"},
 {name:"Platinum",xp:1200,badge:"üíé"},
 {name:"The Master",xp:2000,badge:"üî•"},
 {name:"The Topper",xp:3200,badge:"üëë"}
];

/* ===== USER DATA ===== */
let xp = +localStorage.getItem("focusXP") || 0;
let lastRank = localStorage.getItem("rank") || "Bronze";

/* ===== TIMER ===== */
let timeLeft = SESSION_TIME;
let interval = null;

/* ===== BOTS (PERSISTENT) ===== */
let bots = JSON.parse(localStorage.getItem("bots")) || [
 {name:"Ravi",xp:120},
 {name:"Anu",xp:180},
 {name:"Kunal",xp:260},

 {name:"Sneha",xp:350},
 {name:"Rahul",xp:480},
 {name:"Pooja",xp:650},

 {name:"Aman",xp:760},
 {name:"Neha",xp:940},
 {name:"Vikas",xp:1100},

 {name:"Arjun",xp:1350},
 {name:"Meena",xp:1650},

 {name:"Dev",xp:2300},

 {name:"platinum",xp:3200} // only topper
];

/* ===== UTIL ===== */
function formatTime(sec){
 let m=Math.floor(sec/60), s=sec%60;
 return m+":"+(s<10?"0":"")+s;
}
function getRank(x){
 return ranks.reduce((a,b)=>x>=b.xp?b:a);
}
function rand(min,max){
 return Math.floor(Math.random()*(max-min+1))+min;
}
function todayKey(){
 const d=new Date();
 return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
}

/* ===== BOT DAILY GROWTH ===== */
function growBotsDaily(){
 const today=todayKey();
 const lastDay=localStorage.getItem("botDay");
 if(lastDay===today) return;

 bots.forEach(bot=>{
  if(bot.name==="üî• Legend") return;

  let gain=0;
  if(bot.xp<300) gain=rand(10,25);
  else if(bot.xp<700) gain=rand(15,30);
  else if(bot.xp<1200) gain=rand(20,40);
  else if(bot.xp<2000) gain=rand(25,50);
  else gain=rand(30,60);

  bot.xp+=gain;
 });

 localStorage.setItem("botDay",today);
 localStorage.setItem("bots",JSON.stringify(bots));
}

/* ===== UI ===== */
function updateUI(animate=false){
 growBotsDaily();

 const r=getRank(xp);
 badge.innerText=r.badge;
 rank.innerText=r.name;
 xpSpan.innerText=xp;

 if(animate && r.name!==lastRank){
  rankUp.style.display="flex";
  newRank.innerText=r.name;
  setTimeout(()=>rankUp.style.display="none",2000);
 }

 lastRank=r.name;
 localStorage.setItem("rank",lastRank);
 localStorage.setItem("focusXP",xp);

 loadLeaderboard();
}

/* ===== FOCUS TIMER ===== */
function startFocus(){
 startBtn.disabled=true;
 interval=setInterval(()=>{
  timeLeft--;
  timer.innerText=formatTime(timeLeft);

  if(timeLeft<=0){
   clearInterval(interval);
   xp+=XP_PER_SESSION;
   timeLeft=SESSION_TIME;
   timer.innerText="20:00";
   startBtn.disabled=false;
   updateUI(true);
  }
 },1000);
}

/* ===== LEADERBOARD ===== */
function loadLeaderboard(){
 let players=[...bots,{name:"You",xp:xp,me:true}];
 players.sort((a,b)=>b.xp-a.xp);

 leaderboard.innerHTML="";
 players.forEach((p,i)=>{
  leaderboard.innerHTML+=`
   <li class="${p.me?'me':''}">
    #${i+1} ${p.name}
    <span>${p.xp} XP</span>
   </li>`;
 });
}

/* ===== INIT ===== */
const badge=document.getElementById("badge");
const rank=document.getElementById("rank");
const xpSpan=document.getElementById("xp");
const timer=document.getElementById("timer");
const startBtn=document.getElementById("startBtn");
const leaderboard=document.getElementById("leaderboard");
const rankUp=document.getElementById("rankUp");
const newRank=document.getElementById("newRank");

updateUI();
</script>

</body>
</html>
